# Story 1.2: Frontend Development with Mock Data

## Status

Draft

## Story

**As a** Frontend Developer,
**I want** to build the landing page components using Next.js and shadcn/ui with mock package data,
**so that** the complete user interface is functional and ready for backend integration.

## Acceptance Criteria

1. **AC1:** Landing page component built with Next.js 14+ App Router using TypeScript and Tailwind CSS

2. **AC2:** Hero section component with dynamic countdown timer calculating days until 27 กันยายน 2568

3. **AC3:** Package selection component with Free/Advanced toggle and capacity status messaging using mock data

4. **AC4:** Modal system implemented for registration flow with mobile-optimized full-screen design

5. **AC5:** Government credibility badge component with proper logo placement and responsive scaling

6. **AC6:** Analytics preview component showing blurred/teaser content for freemium conversion optimization

## Tasks / Subtasks

- [ ] Task 1: Set up Next.js landing page route structure (AC: 1)
  - [ ] Create apps/web/app/(landing)/page.tsx as main landing page route
  - [ ] Set up proper TypeScript interfaces for all component props
  - [ ] Configure Tailwind CSS with medical color palette (#0d7276, #529a9d, #cae0e1)
  - [ ] Install and configure shadcn/ui components (Button, Card, Dialog, Badge)

- [ ] Task 2: Build Hero section component with countdown timer (AC: 2)
  - [ ] Create components/landing/hero-section.tsx with TypeScript
  - [ ] Implement countdown timer hook using React hooks (useEffect, useState)
  - [ ] Add Thai date formatting for "27 กันยายน 2568" target date
  - [ ] Style with Tailwind using primary color (#0d7276) background
  - [ ] Implement responsive typography for mobile/tablet/desktop

- [ ] Task 3: Create Package selection component with mock data (AC: 3)
  - [ ] Create components/landing/package-selection.tsx
  - [ ] Define TypeScript interfaces for PackageType, SessionCapacity
  - [ ] Create mock data service in lib/mock-data.ts for package/capacity info
  - [ ] Implement Free/Advanced toggle using shadcn/ui RadioGroup or Toggle
  - [ ] Add capacity status badges showing availability states
  - [ ] Handle package selection state management with React useState

- [ ] Task 4: Implement Modal/Dialog system for registration (AC: 4)
  - [ ] Create components/landing/registration-modal.tsx using shadcn/ui Dialog
  - [ ] Configure full-screen modal for mobile devices using Tailwind responsive classes
  - [ ] Add multi-step form structure (package → details → PDPA consent → confirmation)
  - [ ] Implement form state management with React Hook Form or useState
  - [ ] Add PDPA consent checkbox with required validation
  - [ ] Implement input validation (email format, phone number, required fields)
  - [ ] Add proper ARIA labels and keyboard navigation support

- [ ] Task 5: Build Government credibility badges component (AC: 5)
  - [ ] Create components/landing/credibility-section.tsx
  - [ ] Add placeholder images in public/images/logos/ for government badges
  - [ ] Implement responsive grid layout using Tailwind (grid-cols-2 md:grid-cols-4)
  - [ ] Add ASPECT branding and "ผู้จัด Dentorium Camp" text elements
  - [ ] Optimize image loading with Next.js Image component

- [ ] Task 6: Create Analytics preview component for conversion (AC: 6)
  - [ ] Create components/landing/analytics-preview.tsx
  - [ ] Implement blur overlay effect using CSS backdrop-filter or Tailwind blur utilities
  - [ ] Add sample chart/graph mockups showing potential analytics
  - [ ] Create "Unlock with Advanced Package" CTA overlay
  - [ ] Add hover effects to enhance conversion appeal

- [ ] Task 7: Integration testing and responsive validation
  - [ ] Test all components work together on landing page
  - [ ] Validate mobile responsiveness on iPhone/Android viewports
  - [ ] Test tablet layouts (iPad, Android tablets)
  - [ ] Ensure all interactive elements are touch-friendly
  - [ ] Verify Thai text renders correctly with Prompt font

- [ ] Task 8: E2E testing implementation with Playwright
  - [ ] Create e2e/landing-page.spec.ts for end-to-end tests
  - [ ] Test user flow: Landing → Package selection → Registration modal → Confirmation
  - [ ] Test countdown timer updates correctly
  - [ ] Test package toggle switches between Free/Advanced correctly
  - [ ] Validate PDPA consent is required before form submission
  - [ ] Test error states for invalid inputs (email, phone)

- [ ] Task 9: Accessibility (WCAG 2.1 AA) validation
  - [ ] Run axe-core accessibility tests on all components
  - [ ] Verify keyboard navigation through entire registration flow
  - [ ] Test screen reader compatibility with Thai language content
  - [ ] Validate color contrast ratios meet WCAG AA standards
  - [ ] Ensure all interactive elements have appropriate ARIA labels
  - [ ] Test focus management in modal dialogs

## Dev Notes

### Previous Story Insights

Story 1.1 created HTML/CSS/JS mockup that serves as design reference. Key elements to preserve:

- Medical color palette: #0d7276 (primary), #529a9d (secondary), #cae0e1 (light)
- Thai value proposition: "ทดสอบ TBAT ที่เชียงใหม่ ไม่ต้องเดินทางไปกรุงเทพ"
- Cost savings emphasis: "ประหยัดค่าใช้จ่าย 5,000+ บาท"
- Countdown target: 27 กันยายน 2568

### Technology Stack Requirements

[Source: architecture/section-3-tech-stack.md]

- **Frontend Framework**: Next.js 14+ with App Router
- **Language**: TypeScript 5.0+
- **UI Components**: shadcn/ui (latest)
- **Styling**: Tailwind CSS 3.3+
- **UI Primitives**: Radix UI (underlying shadcn/ui)
- **Package Manager**: pnpm 8.0+

### Component Architecture

[Source: architecture/section-6-components.md#frontend-components]

Key interfaces to implement:

```typescript
interface PackageType {
  type: "FREE" | "ADVANCED";
  price: number; // 0 or 690
  features: string[];
}

interface SessionCapacity {
  session_time: "09:00-12:00" | "13:00-16:00";
  current_count: number;
  max_capacity: number; // Mock: 300
}

interface RegistrationForm {
  onSubmit: (userData: RegistrationData) => void;
  packageSelection: PackageType;
  pdpaConsent: boolean;
}
```

### Data Models for Mock Data

[Source: architecture/section-4-data-models.md]

Relevant models to mock:

```typescript
// User package types
package_type: "FREE" | "ADVANCED"

// Session times
session_time: "09:00-12:00" | "13:00-16:00"

// Pricing
Advanced: 690 THB
Post-exam upgrade: 290 THB
```

### File Structure

Based on existing monorepo structure with Next.js app in apps/web/:

- apps/web/app/(landing)/page.tsx - Main landing page route
- apps/web/app/components/landing/\*.tsx - Landing page components
- apps/web/app/lib/mock-data.ts - Mock data service
- apps/web/public/images/logos/ - Government/credibility logos
- apps/web/e2e/landing-page.spec.ts - Playwright E2E tests

### Security Considerations

- **PDPA Compliance**: Registration form MUST include PDPA consent checkbox that is required before submission
- **Input Validation**: All form inputs must be validated client-side:
  - Email: Valid email format with @ and domain
  - Phone: Thai phone number format (10 digits starting with 0)
  - Name: Thai characters allowed, minimum 2 characters
  - School: Required field, minimum 3 characters
- **XSS Prevention**: Use React's built-in escaping for all user inputs
- **Data Sanitization**: Sanitize all form data before sending to mock API
- **HTTPS Only**: Ensure all API calls use HTTPS in production
- **Rate Limiting**: Consider implementing client-side rate limiting for form submissions

### Important Notes

- This is a **Next.js component-based mockup**, not static HTML
- All components should be production-ready and reusable
- Code written here will be 90% reusable for production (not throwaway)
- Use shadcn/ui components for consistency and accessibility
- Ensure WCAG 2.1 AA compliance for Thai educational platform

## Testing

### Unit Testing

- **Framework**: Jest with React Testing Library
- **Test Location**: Co-located with components (\*.test.tsx files)
- **Coverage Requirements**: Minimum 80% code coverage for all components
- **Key Test Scenarios**:
  - Component rendering with mock data
  - User interactions (clicks, form inputs)
  - State management changes
  - Thai language rendering

### E2E Testing

- **Framework**: Playwright
- **Test File**: apps/web/e2e/landing-page.spec.ts
- **Critical User Flows**:
  1. Landing page load → Package selection → Registration → Confirmation
  2. Free package selection → Capacity check → Modal display
  3. Advanced package selection → Payment flow initiation
  4. PDPA consent validation flow
- **Browser Coverage**: Chrome, Firefox, Safari (mobile & desktop)

### Accessibility Testing

- **Tool**: axe-core for automated testing
- **Manual Testing**: Keyboard navigation and screen reader testing
- **Standards**: WCAG 2.1 Level AA compliance
- **Focus Areas**:
  - Color contrast (medical palette compliance)
  - Thai language screen reader support
  - Focus management in modals
  - Touch target sizes for mobile

### Test Commands

```bash
npm run test              # Run all unit tests
npm run test:coverage     # Generate coverage report
npm run test:e2e         # Run Playwright E2E tests
npm run test:e2e:ui      # Run Playwright with UI mode
```

## Change Log

| Date       | Version | Description                                                                                                                | Author |
| ---------- | ------- | -------------------------------------------------------------------------------------------------------------------------- | ------ |
| 2025-09-08 | 1.0     | Initial story creation with Next.js approach                                                                               | SM Bob |
| 2025-09-08 | 1.1     | Updated based on PO validation: Added security considerations, E2E testing, accessibility validation, fixed file structure | SM Bob |

## Dev Agent Record

### Agent Model Used

[To be filled by Dev Agent]

### Debug Log References

[To be filled by Dev Agent]

### Completion Notes List

[To be filled by Dev Agent]

### File List

[To be filled by Dev Agent]

## QA Results

[To be filled by QA Agent]
