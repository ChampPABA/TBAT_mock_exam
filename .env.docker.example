# TBAT Mock Exam Platform - Docker Environment Configuration
# Copy this file to .env.docker and update with your values

# Environment
NODE_ENV=production
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Database (PostgreSQL in Docker)
DATABASE_URL=postgresql://tbat_user:secure_password_here@postgres:5432/tbat_db?schema=public

# Redis Cache (Redis in Docker)
REDIS_URL=redis://redis:6379
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# NextAuth.js Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=generate_secure_secret_here_min_32_chars

# Email Service (Resend)
RESEND_API_KEY=
FROM_EMAIL=noreply@tbat-exam.com

# Stripe Payment Gateway (Thai Baht)
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_CURRENCY=thb

# Vercel Blob Storage
BLOB_READ_WRITE_TOKEN=

# Sentry Error Monitoring
SENTRY_ENABLED=true
SENTRY_DSN=
SENTRY_ENVIRONMENT=docker
SENTRY_AUTH_TOKEN=
NEXT_PUBLIC_SENTRY_DSN=
NEXT_PUBLIC_SENTRY_ENVIRONMENT=docker

# Security Configuration
# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REDIS_ENABLED=false  # Use in-memory for Docker

# PDPA Compliance
PDPA_CONSENT_REQUIRED=true
PDPA_DATA_RETENTION_DAYS=180  # 6 months
PDPA_EXPORT_ENABLED=true
PDPA_DELETE_ENABLED=true

# Session Configuration
SESSION_SECURE_COOKIE=false  # Set to true with HTTPS
SESSION_MAX_AGE=604800  # 7 days in seconds

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_LETTER=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_SALT_ROUNDS=12
ACCOUNT_LOCKOUT_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# API Security
API_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
API_RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
AUTH_RATE_LIMIT_MAX_ATTEMPTS=5
PAYMENT_RATE_LIMIT_WINDOW_MS=3600000  # 1 hour
PAYMENT_RATE_LIMIT_MAX_ATTEMPTS=10

# Thai Localization
DEFAULT_LOCALE=th-TH
TIMEZONE=Asia/Bangkok

# Exam Configuration
EXAM_CODE_PREFIX_FREE=FREE
EXAM_CODE_PREFIX_ADVANCED=ADV
EXAM_SESSION_CAPACITY=10
MAX_CONCURRENT_SESSIONS=2

# File Upload Limits
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png

# Docker-specific Settings
DOCKER_ENVIRONMENT=true
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_MS=30000

# Monitoring & Logging
LOG_LEVEL=info  # debug, info, warn, error
ENABLE_API_LOGGING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true

# Development/Testing Overrides (Remove in production)
SKIP_AUTH_CHECK=false
MOCK_PAYMENT_GATEWAY=false
DISABLE_RATE_LIMITING=false

# Secrets Management Notes:
# 1. Never commit actual secrets to version control
# 2. Use Docker secrets or environment injection for production
# 3. Rotate secrets regularly (especially NEXTAUTH_SECRET)
# 4. Use strong, unique passwords for database
# 5. Keep Stripe keys secure and use test keys for development

# Security Best Practices:
# - All secrets should be at least 32 characters
# - Database passwords should include uppercase, lowercase, numbers, and symbols
# - Enable HTTPS in production (update NEXTAUTH_URL and SESSION_SECURE_COOKIE)
# - Regularly update dependencies and Docker images
# - Monitor logs for suspicious activity
# - Implement IP whitelisting for admin endpoints if possible